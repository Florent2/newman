<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>response_logger.rb</title>
  <link rel="stylesheet" href="http://jashkenas.github.com/docco/resources/docco.css">
</head>
<body>
<div id='container'>
  <div id="background"></div>
  <div id="jump_to">
    Jump To &hellip;
    <div id="jump_wrapper">
      <div id="jump_page">
          <a class="source" href="../newman.html">newman.rb</a>
          <a class="source" href="application.html">application.rb</a>
          <a class="source" href="controller.html">controller.rb</a>
          <a class="source" href="email_logger.html">email_logger.rb</a>
          <a class="source" href="filters.html">filters.rb</a>
          <a class="source" href="mailer.html">mailer.rb</a>
          <a class="source" href="mailing_list.html">mailing_list.rb</a>
          <a class="source" href="request_logger.html">request_logger.rb</a>
          <a class="source" href="response_logger.html">response_logger.rb</a>
          <a class="source" href="server.html">server.rb</a>
          <a class="source" href="settings.html">settings.rb</a>
          <a class="source" href="store.html">store.rb</a>
          <a class="source" href="store/recorder.html">recorder.rb</a>
          <a class="source" href="test_mailer.html">test_mailer.rb</a>
          <a class="source" href="version.html">version.rb</a>
      </div>
    </div>
  </div>
  <table cellspacing=0 cellpadding=0>
  <thead>
    <tr>
      <th class=docs><h1>response_logger.rb</h1></th>
      <th class=code></th>
    </tr>
  </thead>
  <tbody>
    <tr id='section-1'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-1">&#182;</a>
        </div>
        <p><code>Newman::ResponseLogger</code> supports rudimentary response logging functionality, which is
enabled by default when <code>Newman::Server.simple</code> is used to execute your
applications. </p>

<p>If you are only interested in making use of this logging functionality and not
extending it or changing it in some way, you do not need to be familiar with
the code in this file. Just be sure to note that if you add
<code>service.debug_mode = true</code> to your configuration file, or set the Ruby 
<code>$DEBUG</code> global variable, you will get much more verbose output from 
Newman&rsquo;s logging system.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-2'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-2">&#182;</a>
        </div>
        <hr>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="k">module</span> <span class="nn">Newman</span>  </pre></div>
      </td>
    </tr>
    <tr id='section-3'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-3">&#182;</a>
        </div>
        <p><code>Newman::ResponseLogger</code> is implemented as a singleton object and is 
completely stateless in nature. It can be added directly as an app to 
any <code>Newman::Server</code> instance. The <code>Newman::Server.simple</code> helper method 
automatically places a <code>ResponseLogger</code> at the end of the call chain, but 
it can be inserted at any point and will output the response email object
at that point in the call chain.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="no">ResponseLogger</span> <span class="o">=</span> <span class="no">Object</span><span class="o">.</span><span class="n">new</span>

  <span class="k">class</span> <span class="o">&lt;&lt;</span> <span class="no">ResponseLogger</span>
    <span class="kp">include</span> <span class="no">EmailLogger</span></pre></div>
      </td>
    </tr>
    <tr id='section-4'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-4">&#182;</a>
        </div>
        <hr>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-5'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-5">&#182;</a>
        </div>
        <p>The <code>call</code> method simply delegates to <code>EmailLogger#log_email</code>, passing it
a logger instance, the <code>&ldquo;RESPONSE&rdquo;</code> prefix for the log line, and an instance
of an email object. See <code>Newman::Server.tick</code> and <code>Newman::EmailLogger#log_email</code>
for details.</p>

      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="k">def</span> <span class="nf">call</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
      <span class="n">log_email</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:logger</span><span class="o">]</span><span class="p">,</span> <span class="s2">&quot;RESPONSE&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">[</span><span class="ss">:response</span><span class="o">]</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span></pre></div>
      </td>
    </tr>
  </table>
</div>
</body>
